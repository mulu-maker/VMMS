<Window x:Class="VMMS.WindowBillExit"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:VMMS"
        xmlns:guni="http://gu.se/NumericInput"
        Title="退货单"  Width="1000" Height="600" WindowState="Normal" WindowStartupLocation="CenterScreen" Loaded="Window_Loaded">
    <Window.Resources>
        <local:ConvNumberColor x:Key="ColorConverter"/>
    </Window.Resources>
    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="30" />
            <RowDefinition Height="30" />
            <RowDefinition Height="30" />
            <RowDefinition Height="1*" />
            <RowDefinition Height="25" />
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Grid.ColumnSpan="3"  Name="txtTitle" Text="    退    货    单" HorizontalAlignment="Center" Width="600" FontSize="30" TextAlignment="Center" FontWeight="Normal" Margin="0,0,0,0" />
        <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Bottom">
            <Label Content="单据号(*)" Margin="5,0,0,0" Width="70"/>
            <TextBlock Name="txtCode" Text="{Binding Path=BillCode}" Margin="5,5,10,1" Width="120" />
            <Label Content="原入库单号(*)" Margin="10,0,0,0"/>
            <TextBlock Name="txtSourceCode" Height="25" Margin="5,5,10,1" Width="100" > 
                    <Hyperlink Name="hyperLink" Click="Hyperlink_Click"> 
                        <Run Text="{Binding Path=SourceCode}" />
                    </Hyperlink>
            </TextBlock>
        </StackPanel>
        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Label Content="日期(*)" />
            <DatePicker  Name="DpDate" SelectedDate="{Binding Path=BillDate,Mode=TwoWay}" DisplayDate="{Binding Path=BillDate,Mode=TwoWay}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </StackPanel>
        <StackPanel Grid.Row="1" Grid.Column="2"  Height="25" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom">      
            <Button Content="完成" Name="BtnComplete" Margin="20,0,10,0" Width="45" Height="25"  Click="BtnComplete_Click"/>
            <Button Content="取消"  Name="BtnCancel" Margin="20,0,10,0"  Width="45" Click="BtnCancel_Click"/>
        </StackPanel>
        <StackPanel Grid.Row="2" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
            <Label Content="供应商(*)" Width="60" Margin="5,3,0,3"/>
            <ComboBox Name="CboCustomer"  Width="120" SelectedValue="{Binding Path=CustomerGUID,Mode=TwoWay}" Margin="5,3,10,3"/>
            <Label Content="员工" Margin="10,3,0,3"/>
            <ComboBox Name="CboUser"  Width="80" SelectedValue="{Binding Path=UserGUID,Mode=TwoWay}" Margin="5,3,10,3"/>
            <Label Content="备注" Margin="10,3,0,3"/>
            <TextBox Text="{Binding Remark,Mode=TwoWay}" Width="283" Margin="5,3,10,3" Name="txtRemark" />
        </StackPanel>
        <DataGrid Grid.Row="4" Grid.ColumnSpan="3" AutoGenerateColumns="False"  HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="dataGrid1" IsReadOnly="True" ColumnWidth="1*">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ProductID}" Visibility="Collapsed" />
                <DataGridTextColumn Header="编号" Binding="{Binding ProductCode}" />
                <DataGridTextColumn Header="名称" Binding="{Binding ProductName}"/>
                <DataGridComboBoxColumn Header="计量单位" SelectedValueBinding="{Binding Path=UnitGUID}"/>
                <DataGridComboBoxColumn Header="类别" SelectedValueBinding="{Binding Path=TypeGUID}"/>
                <DataGridComboBoxColumn Header="性质" SelectedValueBinding="{Binding Path=PropertyID}"/>
                <DataGridComboBoxColumn Header="退货库位" SelectedValueBinding="{Binding Path=DebitLocationGUID}"/>
                <DataGridTemplateColumn Header="退货单位成本">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock HorizontalAlignment="Right" Text="{Binding DebitCost,Mode=OneWay,StringFormat={}\{0:N3\}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="退货数量">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock HorizontalAlignment="Right" Text="{Binding DebitNumber,Mode=OneWay,StringFormat={}\{0:N\}}"  Foreground="{Binding DebitNumber,Converter={StaticResource ColorConverter}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="退货金额">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock HorizontalAlignment="Right" Text="{Binding DebitAmount,Mode=OneWay,StringFormat={}\{0:N2\}}"  Foreground="{Binding DebitAmount,Converter={StaticResource ColorConverter}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <Grid Grid.Row="5" Grid.ColumnSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Top" Name="gridTotalFooter" Height="25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Grid.Column="0"/>
            <TextBlock Grid.Column="6" VerticalAlignment="Bottom" HorizontalAlignment="Center" Text="合        计" TextAlignment="Center" Padding="0,0,0,0" FontWeight="Bold" FontSize="16"/>
            <TextBlock VerticalAlignment="Bottom" Grid.Column="7" HorizontalAlignment="Right" Text="{Binding TotalDebitNumber}" TextAlignment="Right" Padding="0,0,0,0" FontWeight="Bold" Name="txtTotalNumber" FontSize="16" Foreground="{Binding TotalDebitNumber,Converter={StaticResource ColorConverter}}"/>
            <TextBlock VerticalAlignment="Bottom" Grid.Column="8" HorizontalAlignment="Right" Text="{Binding TotalDebitAmount}" TextAlignment="Right" Padding="0,0,0,0" FontWeight="Bold" Name="txtTotalAmount" FontSize="16" Foreground="{Binding TotalDebitAmount,Converter={StaticResource ColorConverter}}"/>
        </Grid>
    </Grid>
</Window>
